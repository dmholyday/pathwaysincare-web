<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Responsive Navbar</title>
  <style>
    :root {
      --font: 'Verdana', sans-serif;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font);
    }

    .logo-top-left {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 1003;
    }

    .logo-top-left img {
      height: 250px;
      width: auto;
    }

    .navbar {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      padding: 10px 20px;
      padding-left: 150px;
      background-color: #fff;
      color: #000;
      height: 60px;
      position: relative;
      z-index: 1002;
    }

    .navbar .nav-links {
      display: flex;
      gap: 15px;
    }

    .navbar .nav-links a {
      color: black;
      text-decoration: none;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }

    .navbar .nav-links a:hover {
      background-color: #f0f0f0;
    }

    /* Services dropdown styles */
    .navbar .nav-item {
      position: relative;
    }

    .navbar .services-dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 4px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      min-width: 280px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .navbar .nav-item:hover .services-dropdown {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .navbar .services-dropdown a {
      display: block;
      padding: 12px 16px;
      color: #333;
      text-decoration: none;
      border-bottom: 1px solid #eee;
      transition: background-color 0.3s ease;
    }

    .navbar .services-dropdown a:last-child {
      border-bottom: none;
    }

    .navbar .services-dropdown a:hover {
      background-color: #f8f9fa;
    }

    .navbar .services-toggle {
      margin-left: 8px;
      font-size: 0.8em;
      color: #666;
      transition: transform 0.3s ease;
    }

    /* Rotate triangle when dropdown is hovered */
    .navbar .nav-item:hover .services-toggle {
      transform: rotate(180deg);
    }

    .navbar .hamburger {
      display: none;
      flex-direction: column;
      cursor: pointer;
      gap: 5px;
    }

    .navbar .hamburger div {
      width: 25px;
      height: 3px;
      background-color: black;
      transition: all 0.3s ease;
    }

    /* Hamburger animation */
    .navbar .hamburger.active div:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }

    .navbar .hamburger.active div:nth-child(2) {
      opacity: 0;
    }

    .navbar .hamburger.active div:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -6px);
    }

    #main-title {
      max-width: 700px;
      margin: 0 auto;
      text-align: center;
    }

    #main-title h1 {
      font-size: 1.8em;
      text-align: center;
      font-weight: normal;
      margin-top: 300px;
      margin-bottom: 40px;
      color: #333;
      opacity: 0;
      animation: fadeInDown 2s ease forwards;
      max-width: 600px;        /* new: limit width */
      margin-left: auto;       /* new: center horizontally */
      margin-right: auto;      /* new: center horizontally */
    }

    @keyframes fadeInDown {
      0% {
        opacity: 0;
        transform: translateY(-20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .section {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      padding: 45px 40px;
      gap: 40px;
      margin: 0 auto;
      flex-wrap: wrap;
      opacity: 0;
      transform: translateX(250px);
      transition: all 1s ease-out;
      max-width: 900px;
      word-wrap: break-word;
    }

    .section.in-view {
      opacity: 1;
      transform: translateX(0);
    }

    .section.reverse {
      flex-direction: row-reverse;
      transform: translateX(-250px);
    }

    .section.reverse.in-view {
      transform: translateX(0);
    }

    #about {
      margin-top: 100px;
    }

    #contact .text {
      flex: 1 1 40%;
    }

    #contact .form {
      flex: 1 1 55%;
      margin-top: 0;
      align-self: center;
    }

    .section .text h2 {
      font-size: 1.8em;
      margin-bottom: 30px;
      font-family: Lato;
      font-weight: 100;
    }

    .section .text h3 {
      font-size: 1.5em;
      text-align: center;
      margin-bottom: 20px;
      font-weight: normal;
    }

    .section .text p {
      font-size: 1em;
      line-height: 1.6;
      margin-bottom: 16px;
    }

    .section .text ul {
      padding-left: 60px;
      margin-bottom: 16px;
    }

    .section .text ul ul {
      padding-left: 20px;
      list-style-type: circle;
    }

    .form form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      width: 100%;
    }

    .form input,
    .form textarea {
      padding: 10px;
      font-size: 1em;
      border: 1px solid #ccc;
      border-radius: 4px;
      width: 100%;
      font-family: var(--font);
    }

    .form button {
      padding: 10px;
      background-color: #4596a1;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    @media (max-width: 1096px) and (min-width: 769px) {
      .logo-top-left img {
        height: 150px;
      }

      #main-title h1 {
        font-size: 1.6em;
        text-align: center;
        font-weight: normal;
        margin-top: 140px;
        margin-bottom: 30px;
        max-width: 500px;      /* adjusted smaller for smaller screens */
      }

      .section {
        padding: 35px 30px;
      }

      #about {
        margin-top: 40px;
      }

      .section .text ul {
        padding-left: 40px;
      }
    }

    @media (max-width: 768px) {
      .logo-top-left img {
        height: 100px;
      }

      .navbar {
        padding-left: 20px;
      }

      .navbar .nav-links {
        display: none;
        flex-direction: column;
        background-color: #fff;
        position: absolute;
        top: 120px;
        right: 20px;
        left: 20px;
        padding: 0;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        border: 1px solid #ddd;
        z-index: 1001;
      }

      .navbar .nav-links.active {
        display: flex;
      }

      .navbar .nav-links a {
        padding: 12px 16px;
        border-bottom: 1px solid #eee;
        margin: 0;
      }

      .navbar .nav-links a:last-child {
        border-bottom: none;
      }

      .navbar .nav-item {
        width: 100%;
      }

      /* Mobile services dropdown */
      .navbar .services-dropdown {
        position: static;
        border: none;
        box-shadow: none;
        background-color: #f8f9fa;
        margin: 0;
        min-width: auto;
        opacity: 1;
        visibility: visible;
        transform: none;
        transition: none;
        display: none;
      }

      .navbar .services-dropdown.active {
        display: block;
      }

      .navbar .services-dropdown a {
        padding: 10px 24px;
        font-size: 0.9em;
        border-bottom: 1px solid #e0e0e0;
      }

      .navbar .hamburger {
        display: flex;
      }

      #main-title {
        max-width: 90%;
      }

      #main-title h1 {
        font-size: 1.4em;
        text-align: center;
        font-weight: normal;
        margin-top: 80px;
        margin-bottom: 20px;
        max-width: 90%;
      }

      .section {
        flex-direction: column;
        text-align: left;
        transform: translateY(50px);
        padding: 25px 20px;
        max-width: 100%;
      }

      .section.reverse {
        flex-direction: column;
        transform: translateY(50px);
      }

      .section.reverse.in-view,
      .section.in-view {
        transform: translateY(0);
      }

      .section .text, .section .form {
        flex: 1 1 100%;
      }

      .form {
        display: flex;
        justify-content: center;
        width: 100%;
        margin-top: 16px;
      }

      .form form {
        width: 100%;
        max-width: 400px;
      }

      #about {
        margin-top: 40px;
      }

      .section .text ul {
        padding-left: 20px;
      }
    }

    html {
      scroll-behavior: smooth;
    }

    .char-counter {
      font-size: 0.9em;
      margin-left: 8px;
      color: gray;
    }

    input:required:valid {
      border-left: 4px solid #27ae60;
      background-color: #e6f9ec;
    }

    textarea:required:valid {
      border-left: 4px solid #27ae60;
      background-color: #e6f9ec;
    }

    input:optional:valid:not(:placeholder-shown) {
      border-left: 4px solid #27ae60;
      background-color: #e6f9ec;
    }

    input:optional:invalid:not(:placeholder-shown) {
      border-left: 4px solid #e74c3c;
      background-color: #fdf2f2;
    }
  </style>
</head>
<body>
  <div class="logo-top-left">
    <picture>
      <!-- Mobile: WebP -->
      <source 
        media="(max-width: 768px)" 
        srcset="images/banner_mobile2.webp" 
        type="image/webp" 
      />
      <!-- Mobile fallback PNG -->
      <source 
        media="(max-width: 768px)" 
        srcset="images/banner_mobile.png" 
        type="image/png" 
      />
      
      <!-- Desktop & mid size: SVG -->
      <source 
        media="(min-width: 769px)" 
        srcset="images/banner7.svg" 
        type="image/svg+xml" 
      />

      <!-- Fallback img element for browsers that don't support <picture> -->
      <img 
        src="images/banner7.svg" 
        alt="Responsive banner" 
        class="responsive-banner" 
        width="1200" 
        height="400"
      />
    </picture>
  </div>
  <nav class="navbar">
    <div class="nav-links" id="navLinks">
      <a href="#about">About Us</a>
      <div class="nav-item">
        <a href="#services" id="servicesLink">Services<span class="services-toggle">▼</span></a>
        <div class="services-dropdown" id="servicesDropdown">
          <a href="in-home-services-and-home-care-packages">In-home Services and Home Care Packages</a>
          <a href="social-work-services">Social Work Services</a>
          <a href="residential-aged-care-placement">Residential Aged Care Placement</a>
        </div>
      </div>
      <a href="#contact">Contact</a>
    </div>
    <div class="hamburger" id="hamburger">
      <div></div>
      <div></div>
      <div></div>
    </div>
  </nav>

  <div id="main-title">
    <h1>Guiding Families Through Aged Care with Clarity and Compassion</h1>
  </div>

  <section id="about" class="section">
    <div class="text">
      <h2>About Us</h2>
      <p>At <em>Pathways in Care</em>, our goal is to help families navigate the aged care system with trusted advice, practical support, and ethical advocacy. Whether you're arranging home services, seeking residential care, advocating for a loved one, or simply need someone who understands the system — We are here to guide you.</p>
      <p>We're here to reduce the confusion of navigating this complex system, ease your stress through expert guidance, and free up your time for the people and priorities that matter most.</p>
      <p>Based in Greenwood, with over 15 years' experience as a Hospital Social Worker in the Perth Northern suburbs, we bring deep expertise at the intersection of healthcare and aged care. We also draw from many years of personal experience, with our own elderly parents, supporting in-home care, carers, and aged care transitions.</p>
      <p>Grounded in relationships — not commissions — our approach is personal, respectful, and always in your best interest.</p>
    </div>
  </section>

  <section id="services" class="section reverse">
    <div class="text">
      <h2>Our Services</h2>
      <a href="in-home-services-and-home-care-packages"><h3>In-home Services and Home Care Packages</h3></a>
      <p>lead-in for in-home services and home care packages / panel / box / styled?</p>
      <br>
      <a href="social-work-services"><h3>Social Work Services</h3></a>
      <p>lead-in for Social Work Services / panel / box / styled?</p>
      <br>
      <a href="residential-aged-care-placement"><h3>Residential Aged Care Placement</h3></a>
      <p>lead-in for Residential Aged Care Placement / panel / box /styled?</p>
      <br>
    </div>
  </section>

  <section id="contact" class="section">
    <div class="text">
      <h2>Contact Us</h2>
      <p>If you have an enquiry, would like to hear more, or just want to get in touch, please fill out this contact form.  We will be sure to get back to you promptly.</p>      
    </div>
    <div class="contactus form">
      <form id="contactform" method="post">
        <input id="name" type="text" name="Name" placeholder="Your Name *" maxlength="50" required />
        <span class="char-counter" data-for="name" style="display: none;"></span>
        <input id="email" type="email" name="Email" placeholder="Your Email *" maxlength="40" required />
        <span class="char-counter" data-for="email" style="display: none;"></span>
        <input id="mobile" type="tel" name="Mobile" placeholder="Mobile number" maxlength="10" pattern="[0-9]{3}[0-9]{3}[0-9]{4}" optional/>
        <span class="char-counter" data-for="mobile" style="display: none;"></span>
        <input id="subject" type="text" name="Subject" placeholder="Subject" maxlength="50" optional />
        <span class="char-counter" data-for="subject" style="display: none;"></span>
        <textarea id="message" name="Message" rows="4" placeholder="Your Message (5,000 characters max) *" maxlength="5000" required></textarea>
        <span class="char-counter" data-for="message" style="display: none;"></span>
        <button type="submit">Send Message</button>
        <div id="successMessage" style="display: none; color: green; margin-top: 10px;">
          Thank you! Your message has been sent.
        </div>
        <div id="failureMessage" style="display: none; color: red; margin-top: 10px;"></div>
      </form>
    </div>
  </section>

  <script>
    const hamburger = document.getElementById('hamburger');
    const navLinks = document.getElementById('navLinks');
    const servicesLink = document.getElementById('servicesLink');
    const servicesDropdown = document.getElementById('servicesDropdown');

    // Hamburger menu toggle
    hamburger.addEventListener('click', () => {
      navLinks.classList.toggle('active');
      hamburger.classList.toggle('active');
    });

    // Mobile services dropdown toggle
    servicesLink.addEventListener('click', (e) => {
      // Only prevent default and toggle dropdown on mobile
      if (window.innerWidth <= 768) {
        e.preventDefault();
        servicesDropdown.classList.toggle('active');
        
        // Update toggle indicator
        const toggle = servicesLink.querySelector('.services-toggle');
        toggle.textContent = servicesDropdown.classList.contains('active') ? '▲' : '▼';
      }
    });

    // Close mobile menu when clicking outside
    document.addEventListener('click', (e) => {
      if (!navLinks.contains(e.target) && !hamburger.contains(e.target)) {
        navLinks.classList.remove('active');
        hamburger.classList.remove('active');
        servicesDropdown.classList.remove('active');
        const toggle = servicesLink.querySelector('.services-toggle');
        toggle.textContent = '▼';
      }
    });

    // Handle window resize
    window.addEventListener('resize', () => {
      if (window.innerWidth > 768) {
        navLinks.classList.remove('active');
        hamburger.classList.remove('active');
        servicesDropdown.classList.remove('active');
        const toggle = servicesLink.querySelector('.services-toggle');
        toggle.textContent = '▼';
      }
    });

    window.history.scrollRestoration = 'manual';
    window.addEventListener('load', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('in-view');
        }
      });
    }, {
      threshold: 0.25
    });

    document.querySelectorAll('.section').forEach(section => {
      observer.observe(section);
    });

    /* prevent maximum form fields */
    document.addEventListener('DOMContentLoaded', () => {
      const inputs = document.querySelectorAll('#contactform input, #contactform textarea');

      inputs.forEach(input => {
        const maxLength = input.getAttribute('maxlength');
        const counter = document.querySelector(`.char-counter[data-for="${input.id}"]`);

        const updateCounter = () => {
          const remaining = maxLength - input.value.length;

          if (remaining <= 5) {
            counter.textContent = `${remaining} characters remaining`;

            // Visual feedback
            if (remaining < 0) {
              counter.style.color = 'red';
            } else if (remaining === 0) {
              counter.style.color = 'orange';
            } else {
              counter.style.color = 'gray';
            }

            counter.style.display = 'inline';
          } else {
            counter.style.display = 'none';
          }
        };

        // Initialize counter
        updateCounter();

        // Update counter on input
        input.addEventListener('input', updateCounter);
      });
    });

    /* Use javascript fetch to send json */
    document.getElementById("contactform").addEventListener("submit", async function(e) {
      e.preventDefault();

      const failureDiv = document.getElementById('failureMessage');
      failureDiv.style.display = 'none'; // Hide the error container initially
      failureDiv.innerHTML = ''; // Clear any previous errors

      const form = e.target;

      const data = {
        Name: form.Name.value,
        Email: form.Email.value,
        Mobile: form.Mobile.value,
        Subject: form.Subject.value,
        Message: form.Message.value
      };

      const response = await fetch("http://localhost:7071/api/ContactUs", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
      });

      if (response.ok) {
        document.getElementById('successMessage').style.display = 'block';
      } else {
        if (response.status === 400) {
          const errorData = await response.json();
          if (errorData.Errors && Array.isArray(errorData.Errors)) {
            const errorList = document.createElement('ul');
            errorData.Errors.forEach(err => {
              const listItem = document.createElement('li');
              listItem.textContent = `${err.Field}: ${err.Message}`;
              errorList.appendChild(listItem);
            });
            failureDiv.appendChild(errorList);
            failureDiv.style.display = 'block';
          } else {
            failureDiv.textContent = 'An unexpected error occurred.';
            failureDiv.style.display = 'block';
          }
        } else {
          failureDiv.textContent = `Error ${response.status}: ${response.statusText}`;
          failureDiv.style.display = 'block';
        }
      }
      window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    });
  </script>
</body>
</html>